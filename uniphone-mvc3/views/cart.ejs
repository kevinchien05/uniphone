<!DOCTYPE html>
<html lang="en">
<head>
     <!-- basic -->
     <meta charset="utf-8">
     <meta http-equiv="X-UA-Compatible" content="IE=edge">
     <!-- mobile metas -->
     <meta name="viewport" content="width=device-width, initial-scale=1">
     <meta name="viewport" content="initial-scale=1, maximum-scale=1">
     <!-- site metas -->
     <title>uniphone</title>
     <meta name="keywords" content="">
     <meta name="description" content="">
     <meta name="author" content="">
     <!-- bootstrap css -->
     <link rel="stylesheet" href="css/bootstrap.min.css">
     <!-- style css -->
     <link rel="stylesheet" href="css/style.css">
     <!-- Responsive-->
     <link rel="stylesheet" href="css/responsive.css">
     <!-- fevicon -->
     <link rel="icon" href="images/fevicon.png" type="image/gif" />
     <!-- Scrollbar Custom CSS -->
     <link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css">
     <!-- Tweaks for older IEs-->
     <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
     <!-- owl stylesheets -->
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
     <link rel="stylesheet" href="css/owl.carousel.min.css">
     <link rel="stylesheet" href="css/owl.theme.default.min.css">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css" media="screen">
     <!--[if lt IE 9]>
       <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
       <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
    <style>
        input {
            margin: 0;
            padding-left: 5px;
            font-size: 10px;
            padding-right: 5px;
            max-width: 18%;
            text-align: center;
        }

        tr,
        td,
        th {
            border: 1px solid black;
            text-align: center;
        }

        th {
            background-color: rgb(206, 201, 201);
        }

        .cart_total{
            margin-top: 50px;
            float: right;
            margin-right: 10%;
        }

        .cart_button{
            clear: both;
            float: right;
            margin-right: 10%;
            margin-top: 15px;
            margin-bottom: 30px;
        }

        .cart_box {
            margin-bottom: 30px;
        }

        .cart_box table {
            margin-top: 20px;
        }

        .cart_button button{
            width: 150px;
            height: 50px;
            border-radius: 30px;
            background-color: red;
            color: white;
        }

        .cart_box button {
            background-color: red;
            border-radius: 30px;
            color: white;
            height: 50px;
            width: 100px;
        }

        .cart_box button:hover {
            color: black;
            background-color: white;
        }
    </style>
</head>
<body class="main-layout">
    <div class="loader_bg">
        <div class="loader"><img src="images/loading.gif" alt="#" /></div>
    </div>
    <header>
        <!-- header inner -->
        <div class="header">

            <div class="container">
                <div class="row">
                    <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col logo_section">
                        <div class="full">
                            <div class="center-desk">
                                <div class="logo">
                                    <a href="index.html"><img src="images/logo.png" alt="#"></a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-9 col-lg-9 col-md-9 col-sm-9">
                        <div class="menu-area">
                            <div class="limit-box">
                                <nav class="main-menu">
                                    <ul class="menu-area-main">
                                        <li class="active"> <a href="/">Home</a> </li>
                                        <li> <a href="/about">About</a> </li>
                                        <li><a href="/product">Brand</a></li>

                                        <% if (!i_user) { %>
                                            <li class="last">
                                                <a href="/login"><img src="icon/pro.png" width="30px" height="30px"
                                                        alt="icon" /></a>
                                            </li>
                                            <% } else { %>
                                                <li class="last">
                                                    <a href="/logout" class="btn btn-outline-warning"
                                                        style="padding: 20px 5px; margin-left: 5px;">Log out as <%=
                                                            i_user.username %></a>
                                                </li>
                                                <% } %>

                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- end header inner -->
    </header>
    <div class="brand_color">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="titlepage">
                        <h2>Cart</h2>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="cart_box">
        <table>
            <tr style="width: 100%;">
                <th style="width: 5%"></th>
                <th style="width: 10%;"></th>
                <th style="width: 10%;">Product</th>
                <th style="width: 10%;">ROM</th>
                <th style="width: 10%;">Color</th>
                <th style="width: 15%;">Price</th>
                <th style="width: 10%;">Quantity</th>
                <th style="width: 15%;">Total</th>
                <th style="width: 15%;"></th> 
            </tr>
            <% for( let i = 0; i < carts.length; i++ ) { %>
                <tr>
                    <td><button onclick=<%='del(' +carts[i].id+')' %> ><img src="images/silang.png" width="10%" height="10%" id="<%= i %> "></button></td>
                    <td><a href="/<%= carts[i].product_id %> "><img src="<%= carts[i].photo %> " width="30%" height="30%" alt=""></a></td>
                    <td><%= carts[i].name %> </td>
                    <td><%= carts[i].rom %>  GB</td>
                    <td>
                        <center>
                            <div class="attr2"><%= carts[i].color %> </div>
                        </center>
                    </td>
                    <td>Rp.<input value=<%= carts[i].price %> disabled style="border: none;width: 90%;" id=<%= "harga_awal" + i %>></td>
                    <td>
                        <div>
                            <div class="btn" onclick="kurang('<%= i %>','<%= carts[i].price %>')" id=<%= "kurang" + i %>   style="border: 1px solid black;"><img src="icon/minus.png" width="10px"><span
                                    class="glyphicon glyphicon-minus"></span></div>
                            <input value=<%= carts[i].quantity %> id=<%= "jumlah" + i %> style="width: 30px; height: 35px;"/>
                            <div class="btn" onclick="tambah('<%= i %>','<%= carts[i].price %>')" id=<%= "tambah" + i %> style="border: 1px solid black;"><img src="icon/plus.png" width="10px"><span
                                    class="glyphicon glyphicon-plus"></span></div>
                        </div>
                    </td>
                    <td>Rp.<input value=<%= carts[i].price*carts[i].quantity %>  disabled style="border: none;width: 90%;" id=<%= "harga" + i %>></td>
                    <td><button onclick="contoh('<%= carts[i].product_id %>','<%= carts[i].id %>','<%= carts[i].photo %>','<%= carts[i].name %>','<%= carts[i].rom %>','<%= carts[i].color %>','<%= carts[i].price %>','<%= i %>')">Add to Order</button></td>
                </tr>
            <% } %>
            
        </table>
    </div>
    <footer style="clear: both;">
        <div id="contact" class="footer">
            <div class="container">
                <div class="row pdn-top-30">
                    <div class="col-md-12 ">
                        <div class="footer-box">
                            <div class="headinga">
                                <h3>Address</h3>
                                <span>Medan</span>
                                <p>(+62)8135269343
                                    <br>uniphone@gmail.com</p>
                            </div>
                            <ul class="location_icon">
                                <li> <a href="https://www.facebook.com"><i class="fa fa-facebook-f"></i></a></li>
                                <li> <a href="https://twitter.com/?lang=en"><i class="fa fa-twitter"></i></a></li>
                                <li> <a href="https://www.instagram.com/"><i class="fa fa-instagram"></i></a></li>

                            </ul>
                            <div class="menu-bottom">
                                <ul class="link">
                                    <li> <a href="/">Home</a></li>
                                    <li> <a href="/about">About</a></li>
                                    <li> <a href="/product">Brand </a></li>
                                    <li> <a href="/"> Contact us</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="copyright">
                <div class="container">
                    <p>Copyright &copy; 2021 UniPhone. All rights reserved</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Javascript files-->
    <script src="js/jquery.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/jquery-3.0.0.min.js"></script>
    <script src="js/plugin.js"></script>
    <script src="js/productdetails.js"></script>
    <!-- sidebar -->
    <script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
    <script src="js/custom.js"></script>
    <!-- javascript -->
    <script src="js/owl.carousel.js"></script>
    <script src="https:cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>
    <script>
        $(document).ready(function() {
            $(".fancybox").fancybox({
                openEffect: "none",
                closeEffect: "none"
            });

            $(".zoom").hover(function() {

                $(this).addClass('transition');
            }, function() {

                $(this).removeClass('transition');
            });
        });
    </script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
        let tambah = (i,price) => {
            let harga = document.getElementById("harga"+i);
            let jumlah = document.getElementById("jumlah"+i);
            jumlah.value = parseInt(jumlah.value) + 1
            harga.value = price * jumlah.value 
        }
        let kurang = (i,price) => {
            let harga = document.getElementById("harga"+i);
            let jumlah = document.getElementById("jumlah"+i);
            jumlah.value = parseInt(jumlah.value) - 1
            harga.value = price * jumlah.value
        }
    </script>
    <script>
        let contoh = (id,cartid,photo,name,rom,color,price,i) => {
            axios({
                method: 'post',
                url: '/api/pay',
                data: {
                    product_id: id,
                    cart_id: cartid,
                    photo: photo,
                    name: name,
                    rom: rom,
                    color: color,
                    price: price,
                    quantity: document.getElementById("jumlah"+i).value,
                    total: document.getElementById("harga"+i).value
                }
            }).then((result) => {
                window.location = "/payment";
            }).catch((err) => {
                alert('error ' + err)
            });
        }
    </script>
    <script>
        let del = (id) => {
            axios.delete('/api/cart/' + id).then((result) => {
                location.reload();
            }).catch((err) => {
                alert('error ' + err)
            });
        }
    </script>
</body>
</html>